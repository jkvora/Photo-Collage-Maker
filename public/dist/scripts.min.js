function init(){var e=document.getElementById("canvasWrap");e.tabIndex=-1,e.addEventListener("keydown",OnkeyDown,!1),e.addEventListener("drop",OnImageDrop,!1),e.addEventListener("dragover",OnImageDragOver,!1),canvas=new fabric.Canvas("canvas"),canvas.selectionColor="rgba(0,0,0,0.3)",canvas.selectionBorderColor="black",canvas.selectionLineWidth=1,document.getElementById("download").addEventListener("click",function(){downloadCanvas(this,"canvas","photo_collage.jpg")},!1),AddDummyImages()}function OnkeyDown(e){var a=canvas.getActiveObject();console.log(e.keyCode),46===e.keyCode&&canvas.remove(a)}function OnImageDrop(e){console.log("Image Dropped"),e.preventDefault();var a=new Image;a.src=e.dataTransfer.getData("imgsrc"),insertAtCenter(a)}function OnImageDragOver(e){console.log("Image DragOver"),e.preventDefault()}function drag(e){e.dataTransfer.setData("imgsrc",e.target.src)}function displayimg(e){var a=e.target.files[0],n=new FileReader,t=new Image;t.title=a.name,n.onload=function(e){t.src=e.target.result,insertAtCenter(t)},n.readAsDataURL(a)}function insertAtCenter(e){e.setAttribute("crossOrigin","anonymous");var a=new fabric.Image(e,{left:canvas.getWidth()/2-e.width/2,top:canvas.getHeight()/2-e.height/2,angle:0});canvas.add(a)}function downloadCanvas(e,a,n){e.href=document.getElementById(a).toDataURL(),e.download=n}function AddDummyImages(){for(var e=document.getElementById("img-container"),a=5,n=0;n<a;n++){var t=document.createElement("div");t.className="img-item";var r=new Image;r.draggable="true",r.addEventListener("dragstart",drag,!1),r.src="img/"+(n+1)+".jpg",t.appendChild(r),e.appendChild(t)}}window.onload=init;var canvas;