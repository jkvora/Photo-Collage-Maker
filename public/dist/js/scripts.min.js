function init(){var e=document.getElementById("canvasWrap");e.tabIndex=-1,e.addEventListener("keydown",OnkeyDown,!1),e.addEventListener("drop",OnImageDrop,!1),e.addEventListener("dragover",OnImageDragOver,!1),PhotoCollage=new fabric.Canvas("canvas"),PhotoCollage.selectionColor="rgba(0,0,0,0.3)",PhotoCollage.selectionBorderColor="black",PhotoCollage.selectionLineWidth=1,document.getElementById("download").addEventListener("click",function(){downloadCanvas(this,"canvas","photo_collage.jpg")},!1),AddDummyImages()}function OnkeyDown(e){var t=PhotoCollage.getActiveObject();46===e.keyCode&&PhotoCollage.remove(t)}function OnImageDrop(e){e.preventDefault();var t=new Image;t.src=e.dataTransfer.getData("text"),insertAtCenter(t)}function OnImageDragOver(e){e.preventDefault()}function drag(e){e.dataTransfer.setData("text",e.target.src)}function displayimg(e){var t=e.target.files[0],n=new FileReader,a=document.getElementById("img_drop");a.onload=function(){var e=new Image;e.src=this.src,insertAtCenter(e)},n.onload=function(){a.src=n.result},t&&n.readAsDataURL(t)}function insertAtCenter(e){e.setAttribute("crossOrigin","anonymous");var t=new fabric.Image(e,{left:PhotoCollage.getWidth()/2-e.width/2,top:PhotoCollage.getHeight()/2-e.height/2,angle:0});PhotoCollage.add(t)}function downloadCanvas(e,t,n){e.href=document.getElementById(t).toDataURL(),e.download=n}function AddDummyImages(){for(var e=document.getElementById("img-container"),t=5,n=0;n<t;n++){var a=document.createElement("div");a.className="img-item";var o=new Image;o.draggable="true",o.addEventListener("dragstart",drag,!1),o.src="img/"+(n+1)+".jpg",a.appendChild(o),e.appendChild(a)}}window.onload=init,window.PhotoCollage={};